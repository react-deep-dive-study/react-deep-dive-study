# Next.js 13과 리액트 18

## 이야깃거리

- Next.js가 많은 기능을 제공하는데 개발자가 선택하는 것이 아니라 기본적으로 설정되어 있는 것들을 알아두지 않으면 문제 생길만한 것들이 많아 보임 (fetch 최적화, cache 갱신 등등...)

## 리액트 서버 컴포넌트

### 서버 사이드 렌더링의 한계

- 백엔드 리소스를 직접 접근할 수 없음
- 코드 스플리팅이 자동으로 이루어지지 않고, lazy 하게 컴포넌트를 로드 하더라도 지연 로딩하는 동안 어떤 컴포넌트를 불러올지 결정할 수 없음
- 다른 컴포넌트의 결과물에 의존하는 컴포넌트들이 많은 경우 렌더링 시간이 길어질 수 있음

### Next.js의 서버 컴포넌트

- 요청을 받아 컴포넌트들을 모두 JSON으로 직렬화하고, 클라이언트 컴포넌트들은 클라이언트에서 렌더링할 수 있게 플레이스 홀더로 자리를 표시해둠
  - JSON으로 직렬화 되기 때문에 클래스같이 직렬화 할 수 없는 데이터는 서버 컴포넌트에서 클라이언트 컴포넌트 props로 넘겨줄 수 없음

## Next.js의 스트리밍 렌더링

- 페이지의 모든 컴포넌트를 서버에서 렌더링하고 내려주는 것이 아니라 먼저 렌더링된 컴포넌트 먼저 내려주는 형태가 가능함
- 개발자가 컴포넌트 별로 서스펜스를 추가해 이러한 우선순위를 컨트롤 할 수 있음
- 청크 단위로 데이터를 내려주기 때문에 서스펜스로 로딩 중인 컴포넌트 들의 경우 로딩을 먼저 보여주기 위해 먼저 청크를 내려주고, 이후 실제 렌더링된 컴포넌트의 청크를 내려줌
